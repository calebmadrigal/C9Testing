{"ts":1346644400081,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"from flask import Flask\nfrom flask import request, redirect, url_for\n\napp = Flask(__name__)\n\n# This lets me change what I redirect to from my \"homepage\" (caleb.pythonanywhere.com).\n@app.route('/')\ndef index():\n    return redirect(url_for('net_worth_page'))\n\n@app.route('/net_worth_page', methods=['GET', 'POST'])\ndef net_worth_page():\n    if request.method == \"GET\":\n        return generate_form()\n    else:\n        income = int(request.form['income'])\n        expenses = int(request.form['expenses'])\n        start_year = int(request.form['startyear'])\n        years = int(request.form['years'])\n\n        year_list = generate_year_list(start_year, years)\n        net_worth = generate_net_worth(income, expenses, years)\n\n        return generate_graph(year_list, net_worth, \"Net Worth\")\n\ndef generate_net_worth(income, expenses, number_years):\n    projection = []\n    total = 0\n    for year in range(number_years):\n        total = total + (income - expenses)\n        projection.append(total)\n    return projection\n\ndef generate_year_list(start_year, number_years):\n    return range(start_year, start_year+number_years+1)\n\ndef generate_form():\n    return \"\"\"\n            <form action=\"/net_worth_page\" method=\"POST\">\n                Yearly Income <input type=\"text\" name=\"income\" /> <br />\n                Yearly Expenses <input type=\"text\" name=\"expenses\" /> <br />\n                Start Year <input type=\"text\" name=\"startyear\" /> <br />\n                Years to Project <input type=\"text\" name=\"years\" /> <br />\n                <input type=\"submit\" />\n            </form>\n        \"\"\"\n\ndef generate_graph(x_axis, y_axis, title=''):\n    return \"\"\"\n    <html><head>\n        <script type=\"text/javascript\" src=\"http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js\"></script>\n        <script type=\"text/javascript\">\n            $(function () {\n                var chart;\n                $(document).ready(function() {\n                    chart = new Highcharts.Chart({\n                        chart: {\n                            renderTo: 'container',\n                            type: 'line',\n                            marginRight: 130,\n                            marginBottom: 100\n                        },\n                        title: {\n                            text: '%(title)s',\n                            x: -20 //center\n                        },\n                        subtitle: {\n                            text: '',\n                            x: -20\n                        },\n                        xAxis: {\n                            categories: %(x_axis)s,\n                            labels: {\n                                rotation: -45,\n                                align: 'right'\n                            }\n                        },\n                        yAxis: {\n                            title: {\n                                text: 'Dollars'\n                            },\n                            plotLines: [{\n                                value: 0,\n                                width: 1,\n                                color: '#808080'\n                            }]\n                        },\n                        tooltip: {\n                            formatter: function() {\n                                    return '<b>'+ this.series.name +'</b><br/>'+\n                                    this.x +': '+ this.y;\n                            }\n                        },\n                        legend: {\n                            layout: 'vertical',\n                            align: 'right',\n                            verticalAlign: 'top',\n                            x: -10,\n                            y: 100,\n                            borderWidth: 0\n                        },\n                        series: [{\n                            name: 'Net Worth',\n                            data: %(y_axis)s\n                        }]\n                    });\n                });\n\n            });\n        </script>\n    </head><body>\n    <script src=\"http://test.calebmadrigal.com/jshost/highcharts/highcharts.js\"></script>\n    <script src=\"http://test.calebmadrigal.com/jshost/highcharts/modules/exporting.js\"></script>\n\n    <div id=\"container\" style=\"min-width: 400px; height: 400px; margin: 0 auto\"></div>\n    </body></html>\n    \"\"\" % {'x_axis': str(x_axis), 'y_axis': str(y_axis), 'title': title }\n\nif __name__ == '__main__':\n    app.run(host='0.0.0.0', port=9070)"]],"start1":0,"start2":0,"length1":0,"length2":4450}]],"length":4450}
